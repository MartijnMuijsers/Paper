From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: MartijnMuijsers <martijnmuijsers@live.nl>
Date: Mon, 4 Jul 2022 00:13:23 +0200
Subject: [PATCH] Stopped working on give command while in progress


diff --git a/src/main/java/net/minecraft/commands/synchronization/ArgumentTypeInfos.java b/src/main/java/net/minecraft/commands/synchronization/ArgumentTypeInfos.java
index 74495b5a7cc6b5dd3bf648c5610e78e49547657e..69bb527caa960df890e3dee9910f95432622319b 100644
--- a/src/main/java/net/minecraft/commands/synchronization/ArgumentTypeInfos.java
+++ b/src/main/java/net/minecraft/commands/synchronization/ArgumentTypeInfos.java
@@ -122,8 +122,7 @@ public class ArgumentTypeInfos {
             register(registry, "test_class", TestClassNameArgument.class, SingletonArgumentInfo.contextFree(TestClassNameArgument::testClassName));
         }
 
-        register(registry, "uuid", UuidArgument.class, SingletonArgumentInfo.contextFree(UuidArgument::uuid));
-        return register(registry, "sucraft_item", CustomItemArgument.class, SingletonArgumentInfo.contextFree(CustomItemArgument::item)); // Martijn - custom blocks and items
+        return register(registry, "uuid", UuidArgument.class, SingletonArgumentInfo.contextFree(UuidArgument::uuid));
     }
 
     private static <T extends ArgumentType<?>> Class<T> fixClassType(Class<? super T> clazz) {
diff --git a/src/main/java/net/minecraft/server/commands/GiveCommand.java b/src/main/java/net/minecraft/server/commands/GiveCommand.java
index 20555182f96acdec4c065d1ae4179afaee35c1a1..0feab0105d15be1847d0064aeb1186ed8a2b117a 100644
--- a/src/main/java/net/minecraft/server/commands/GiveCommand.java
+++ b/src/main/java/net/minecraft/server/commands/GiveCommand.java
@@ -11,6 +11,7 @@ import java.util.Iterator;
 import net.minecraft.commands.CommandBuildContext;
 import net.minecraft.commands.CommandSourceStack;
 import net.minecraft.commands.arguments.EntityArgument;
+import net.minecraft.commands.arguments.ResourceLocationArgument;
 import net.minecraft.commands.arguments.item.ItemArgument;
 import net.minecraft.commands.arguments.item.ItemInput;
 import net.minecraft.network.chat.Component;
@@ -28,8 +29,11 @@ public class GiveCommand {
 
     public GiveCommand() {}
 
+    // Martijn start - custom blocks and items
+
+    @SuppressWarnings("unchecked")
     public static void register(CommandDispatcher<CommandSourceStack> dispatcher, CommandBuildContext commandRegistryAccess) {
-        // Martijn start - custom blocks and items
+        // This is not working, stopped working on this while in progress
         var targetsArgument =
             net.minecraft.commands.Commands.argument("targets", EntityArgument.players())
                 .then(((RequiredArgumentBuilder) net.minecraft.commands.Commands.argument("item", ItemArgument.item(commandRegistryAccess)).executes((commandcontext) -> {
@@ -37,7 +41,7 @@ public class GiveCommand {
                 })).then(net.minecraft.commands.Commands.argument("count", IntegerArgumentType.integer(1)).executes((commandcontext) -> {
                     return GiveCommand.giveItem((CommandSourceStack) commandcontext.getSource(), ItemArgument.getItem(commandcontext, "item"), EntityArgument.getPlayers(commandcontext, "targets"), IntegerArgumentType.getInteger(commandcontext, "count"));
                 })))
-                .then(((RequiredArgumentBuilder) net.minecraft.commands.Commands.argument("sucraft item", CustomItemArgument.item())).executes((commandcontext) -> {
+                .then(((RequiredArgumentBuilder) net.minecraft.commands.Commands.argument("sucraft item", ResourceLocationArgument.id())).executes((commandcontext) -> {
                     return GiveCommand.giveItem((CommandSourceStack) commandcontext.getSource(), CustomItemArgument.getItem(commandcontext, "sucraft item"), EntityArgument.getPlayers(commandcontext, "targets"), 1);
                 }).then(net.minecraft.commands.Commands.argument("count", IntegerArgumentType.integer(1)).executes((commandcontext) -> {
                     return GiveCommand.giveItem((CommandSourceStack) commandcontext.getSource(), CustomItemArgument.getItem(commandcontext, "sucraft item"), EntityArgument.getPlayers(commandcontext, "targets"), IntegerArgumentType.getInteger(commandcontext, "count"));
@@ -46,9 +50,10 @@ public class GiveCommand {
             return commandlistenerwrapper.hasPermission(2);
         }).then(targetsArgument);
         dispatcher.register(giveCommand);
-        // Martijn end - custom blocks and items
     }
 
+    // Martijn end - custom blocks and items
+
     private static int giveItem(CommandSourceStack source, ItemInput item, Collection<ServerPlayer> targets, int count) throws CommandSyntaxException {
         int j = item.getItem().getMaxStackSize();
         int k = j * 100;
