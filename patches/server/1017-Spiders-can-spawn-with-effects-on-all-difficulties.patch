From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: MartijnMuijsers <martijnmuijsers@live.nl>
Date: Thu, 9 Jun 2022 02:18:14 +0200
Subject: [PATCH] Spiders can spawn with effects on all difficulties


diff --git a/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java b/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java
index 900c4536b1087ebdbc5e20b4a1548b87d788b7bd..f4514d717de65b86cc13c86a591e3f85d1ecae28 100644
--- a/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java
+++ b/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java
@@ -75,6 +75,7 @@ public class WorldConfiguration extends ConfigurationPart {
         public boolean caveSpidersHavePoisonOnEasyDifficulty = false; // Martijn - cave spiders have poison on easy difficulty
         public boolean witherEffectFromWitherSkullsOnEasyDifficulty = false; // Martijn - wither effect from wither skulls on easy difficulty
         public boolean lightningSpawnsFire = true; // Martijn - configurable lightning fire
+        public boolean spidersWithEffectsOnAllDifficulties = false; // Martijn - spiders can spawn with effects on all difficulties
 
         // Martijn start - minimum health after starving
 
diff --git a/src/main/java/net/minecraft/world/entity/monster/Spider.java b/src/main/java/net/minecraft/world/entity/monster/Spider.java
index c3085ad5410b41d9c7703b28ca835dbee3f49ee7..a007974ef1fdd9e11559b2c572dcd0b4cfed902a 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Spider.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Spider.java
@@ -168,7 +168,7 @@ public class Spider extends Monster {
 
         if (object == null) {
             object = new Spider.SpiderEffectsGroupData();
-            if (world.getDifficulty() == Difficulty.HARD && randomsource.nextFloat() < 0.1F * difficulty.getSpecialMultiplier()) {
+            if (((world.getDifficulty() != Difficulty.PEACEFUL && world.getLevel().paperConfig().difficultyChanges.spidersWithEffectsOnAllDifficulties) || world.getDifficulty() == Difficulty.HARD) && randomsource.nextFloat() < 0.1F * difficulty.getSpecialMultiplier()) { // Martijn - spiders can spawn with effects on all difficulties
                 ((Spider.SpiderEffectsGroupData) object).setRandomEffect(randomsource);
             }
         }
